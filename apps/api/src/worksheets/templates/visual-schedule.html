<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{title}}</title>
  <style>{{styles}}</style>
</head>
<body>
  <!-- HEADER -->
  <div class="worksheet-header">
    <div class="header-left">
      <div class="worksheet-title">{{title}}</div>
      <div class="worksheet-subtitle">Visual Schedule &bull; {{difficultyLabel}} Level</div>
    </div>
    <div class="header-meta">
      <div class="field"><span class="field-label">Date:</span> {{date}}</div>
      <div class="field"><span class="field-label">Setting:</span> {{setting}}</div>
      <div class="field"><span class="field-label">Duration:</span> {{totalDuration}}</div>
      <div class="meta-tags">
        {{#each domainTags}}
        <span class="meta-tag">{{this}}</span>
        {{/each}}
      </div>
    </div>
  </div>

  <!-- FILL-IN FIELDS -->
  <div class="fill-fields">
    <div class="fill-field">Child's Name: <span class="line"></span></div>
    <div class="fill-field">Facilitator: <span class="line"></span></div>
    <div class="fill-field">Date: <span class="line"></span></div>
  </div>

  <!-- INSTRUCTIONS -->
  <div class="instructions-box">
    <h2>How to Use This Visual Schedule</h2>
    <p>{{instructions}}</p>
  </div>

  <!-- TIMELINE -->
  <div class="timeline">
    {{#each steps}}
    <div class="timeline-step">
      <div class="timeline-connector">
        <div class="step-number">{{stepIndex}}</div>
        {{#unless isLast}}
        <div class="connector-line"></div>
        {{/unless}}
      </div>
      <div class="step-card">
        <div class="step-card-header">
          <div class="step-checkbox">
            <div class="checkbox-box"></div>
          </div>
          <div class="step-icon-area">
            {{#if this.imageUrl}}
            <img src="{{this.imageUrl}}" alt="{{this.altText}}" class="step-icon-img" />
            {{else}}
            <div class="step-icon-placeholder">
              <span class="icon-symbol">{{this.iconEmoji}}</span>
            </div>
            {{/if}}
          </div>
          <div class="step-info">
            <div class="step-label">{{this.label}}</div>
            <div class="step-duration">
              <span class="duration-icon">&#9201;</span>
              {{this.duration}}
            </div>
          </div>
        </div>
        <div class="step-description">{{this.description}}</div>
        {{#if this.supportTip}}
        <div class="step-support-tip">
          <span class="support-tip-label">Support Tip:</span> {{this.supportTip}}
        </div>
        {{/if}}
      </div>
    </div>
    {{/each}}
  </div>

  <!-- TRANSITION STRATEGIES -->
  {{#if transitionStrategies.length}}
  <div class="transition-section">
    <h2>Transition Strategies</h2>
    <p class="transition-intro">{{transitionIntro}}</p>
    <div class="transition-cards">
      {{#each transitionStrategies}}
      <div class="transition-card">
        <div class="transition-card-title">{{this.title}}</div>
        <div class="transition-card-desc">{{this.description}}</div>
        {{#if this.when}}
        <div class="transition-card-when"><span class="when-label">When to use:</span> {{this.when}}</div>
        {{/if}}
      </div>
      {{/each}}
    </div>
  </div>
  {{/if}}

  <!-- TIPS -->
  {{#if tips.length}}
  <div class="tips-section">
    <h2>Tips for Success</h2>
    <ul>
      {{#each tips}}
      <li>{{this}}</li>
      {{/each}}
    </ul>
  </div>
  {{/if}}

  <!-- NOTES -->
  <div class="notes-section">
    <h2>Observation Notes</h2>
    <p class="notes-prompt">{{notesPrompt}}</p>
    <div class="notes-lines">
      <div class="line"></div>
      <div class="line"></div>
      <div class="line"></div>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="worksheet-footer">
    <div class="footer-brand">
      <span class="footer-text">Generated by Upllyft &bull; upllyft.com &bull; AI-powered learning resources for the neurodivergent community</span>
    </div>
  </div>
</body>
</html>
